<nav-bar title="我的订单" />

<view class="page-container">
  <!-- Status tabs -->
  <scroll-view class="tabs-scroll" scroll-x>
    <view class="tabs-wrapper">
      <view
        wx:for="{{tabs}}"
        wx:key="key"
        class="tab-item {{activeTab === index ? 'tab-item--active' : ''}}"
        data-index="{{index}}"
        bindtap="onTabTap"
      >
        <text>{{item.label}}</text>
        <view wx:if="{{activeTab === index}}" class="tab-underline"></view>
      </view>
    </view>
  </scroll-view>

  <!-- Order list -->
  <view class="order-list">
    <block wx:if="{{!loading && orders.length}}">
      <order-card
        wx:for="{{orders}}"
        wx:key="_id"
        order="{{item}}"
        bind:tap="onOrderTap"
        bind:action="onOrderAction"
      />
    </block>

    <!-- Loading -->
    <view wx:if="{{loading}}" class="loading-center">
      <text>加载中...</text>
    </view>

    <!-- Empty -->
    <view wx:if="{{!loading && orders.length === 0}}" class="empty-wrap">
      <empty-state text="暂无订单" />
    </view>

    <!-- Load more -->
    <view wx:if="{{loadingMore}}" class="loading-more">
      <text>加载更多...</text>
    </view>
    <view wx:if="{{!hasMore && orders.length && !loading}}" class="no-more">
      <text>没有更多了</text>
    </view>
  </view>
</view>

<custom-tab-bar selected="{{1}}" />
