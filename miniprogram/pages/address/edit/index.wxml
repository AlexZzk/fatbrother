<nav-bar title="{{isEdit ? '编辑地址' : '新增地址'}}" left-arrow="{{true}}" />

<view class="page-container">
  <view class="form-card">
    <!-- 收件人 -->
    <view class="form-item">
      <text class="form-label">收件人</text>
      <input
        class="form-input"
        placeholder="请输入姓名"
        value="{{form.name}}"
        adjust-position="{{false}}"
        bindinput="onInput"
        data-field="name"
      />
    </view>
    <view class="divider" />

    <!-- 手机号 -->
    <view class="form-item">
      <text class="form-label">手机号</text>
      <input
        class="form-input"
        type="number"
        placeholder="请输入手机号"
        value="{{form.phone}}"
        adjust-position="{{false}}"
        bindinput="onInput"
        data-field="phone"
      />
    </view>
    <view class="divider" />

    <!-- 地址选点 -->
    <view class="form-item form-item--arrow" bindtap="onChooseLocation">
      <text class="form-label">配送地址</text>
      <view class="location-right">
        <text class="{{form.address ? 'location-text' : 'location-placeholder'}}">
          {{form.address || '点击选择地址'}}
        </text>
        <text class="arrow">></text>
      </view>
    </view>
    <view class="divider" />

    <!-- 门牌号补充 -->
    <view class="form-item">
      <text class="form-label">门牌号</text>
      <input
        class="form-input"
        placeholder="楼栋/单元/房间号（选填）"
        value="{{form.address_detail}}"
        adjust-position="{{false}}"
        bindinput="onInput"
        data-field="address_detail"
      />
    </view>
  </view>

  <!-- 设为默认 -->
  <view class="default-row" bindtap="onToggleDefault">
    <text class="default-label">设为默认地址</text>
    <view class="switch {{form.is_default ? 'switch--on' : ''}}">
      <view class="switch-ball" />
    </view>
  </view>

  <!-- 保存按钮 -->
  <view class="save-bar">
    <button class="save-btn" bindtap="onSave" loading="{{saving}}">
      {{saving ? '保存中...' : '保存地址'}}
    </button>
  </view>
</view>

<toast id="toast" />
