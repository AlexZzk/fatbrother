<nav-bar title="æ”¶è´§åœ°å€" left-arrow="{{true}}" rightText="+ æ–°å¢" bind:right="onAddTap" />

<view class="page-container">
  <block wx:if="{{!loading}}">
    <view wx:if="{{addresses.length > 0}}" class="address-list">
      <view
        wx:for="{{addresses}}"
        wx:key="_id"
        class="address-item {{item.is_default ? 'address-item--default' : ''}}"
        bindtap="onSelectAddress"
        data-id="{{item._id}}"
      >
        <view class="address-main">
          <view class="address-header">
            <text class="address-name">{{item.name}}</text>
            <text class="address-phone">{{item.phone}}</text>
            <view wx:if="{{item.is_default}}" class="default-badge">é»˜è®¤</view>
          </view>
          <text class="address-text">{{item.address}}{{item.address_detail ? ' ' + item.address_detail : ''}}</text>
        </view>
        <view class="address-actions" catchtap="">
          <view
            wx:if="{{!item.is_default}}"
            class="action-btn"
            bindtap="onSetDefault"
            data-id="{{item._id}}"
          >è®¾ä¸ºé»˜è®¤</view>
          <view class="action-btn action-btn--edit" bindtap="onEditTap" data-item="{{item}}">ç¼–è¾‘</view>
          <view class="action-btn action-btn--delete" bindtap="onDeleteTap" data-id="{{item._id}}">åˆ é™¤</view>
        </view>
      </view>
    </view>

    <view wx:else class="empty-state">
      <text class="empty-icon">ğŸ“</text>
      <text class="empty-text">æš‚æ— æ”¶è´§åœ°å€</text>
      <text class="empty-hint">æ·»åŠ åœ°å€ï¼Œäº«å—ä¾¿æ·å¤–å–é…é€</text>
      <view class="empty-add-btn" bindtap="onAddTap">+ æ·»åŠ åœ°å€</view>
    </view>
  </block>

  <view wx:elif="{{loading}}" class="loading-center">
    <text>åŠ è½½ä¸­...</text>
  </view>
</view>

<toast id="toast" />
