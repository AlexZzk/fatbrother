<nav-bar title="èƒ–å…„å¼Ÿå•†æˆ·åå°" right-text="è¿”å›Cç«¯" right-color="#1677FF" bind:rightclick="onBackToC" />

<view class="page-container">
  <block wx:if="{{!loading}}">
    <!-- è¥ä¸šçŠ¶æ€å¡ç‰‡ -->
    <view class="status-card {{isOpen ? 'status-card--open' : 'status-card--closed'}}">
      <view class="status-info">
        <text class="status-dot {{isOpen ? 'status-dot--open' : ''}}">â—</text>
        <text class="status-text">{{isOpen ? 'è¥ä¸šä¸­' : 'ä¼‘æ¯ä¸­'}}</text>
      </view>
      <text class="status-shop-name">{{merchantInfo.shop_name}}</text>
      <button
        class="btn-toggle {{isOpen ? 'btn-toggle--close' : 'btn-toggle--open'}}"
        bindtap="onToggleStatus"
      >{{isOpen ? 'ç»“æŸè¥ä¸š' : 'å¼€å§‹è¥ä¸š'}}</button>
    </view>

    <!-- ä»Šæ—¥æ•°æ® -->
    <view class="stats-card">
      <text class="card-title">ä»Šæ—¥æ•°æ®</text>
      <view class="stats-grid">
        <view class="stats-item">
          <text class="stats-value">{{todayStats.orderCount}}</text>
          <text class="stats-label">è®¢å•æ•°</text>
        </view>
        <view class="stats-item">
          <text class="stats-value">Â¥{{todayStats.revenue}}</text>
          <text class="stats-label">è¥ä¸šé¢</text>
        </view>
        <view class="stats-item">
          <text class="stats-value">Â¥{{todayStats.refund}}</text>
          <text class="stats-label">é€€æ¬¾</text>
        </view>
      </view>
    </view>

    <!-- å¾…å¤„ç†è®¢å• -->
    <view class="alert-card" bindtap="onNavTo" data-page="orders">
      <view class="alert-left">
        <text class="alert-icon">âš¡</text>
        <text class="alert-title">å¾…å¤„ç†è®¢å•</text>
      </view>
      <view class="alert-right">
        <text class="alert-count">å¾…æ¥å• <text class="alert-num">{{pendingOrders.pendingAccept}}</text></text>
        <text class="alert-count">å¾…å‡ºé¤ <text class="alert-num">{{pendingOrders.pendingReady}}</text></text>
        <text class="alert-arrow">></text>
      </view>
    </view>

    <!-- åŠŸèƒ½å®«æ ¼ -->
    <view class="func-grid">
      <view class="func-item" bindtap="onNavTo" data-page="orders">
        <text class="func-icon">ğŸ“‹</text>
        <text class="func-label">è®¢å•ç®¡ç†</text>
      </view>
      <view class="func-item" bindtap="onNavTo" data-page="menu">
        <text class="func-icon">ğŸ½</text>
        <text class="func-label">èœå•ç®¡ç†</text>
      </view>
      <view class="func-item" bindtap="onNavTo" data-page="statistics">
        <text class="func-icon">ğŸ“Š</text>
        <text class="func-label">æ•°æ®ç»Ÿè®¡</text>
      </view>
      <view class="func-item" bindtap="onNavTo" data-page="settings">
        <text class="func-icon">âš™ï¸</text>
        <text class="func-label">åº—é“ºè®¾ç½®</text>
      </view>
    </view>
  </block>

  <block wx:else>
    <view class="loading-center"><text>åŠ è½½ä¸­...</text></view>
  </block>
</view>

<toast id="toast" />
