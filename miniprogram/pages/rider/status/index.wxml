<nav-bar title="éª‘æ‰‹ä¸­å¿ƒ" left-arrow="{{true}}" />

<view class="page-container" wx:if="{{!loading && riderInfo}}">
  <!-- çŠ¶æ€å¡ç‰‡ -->
  <view class="status-card status-card--{{riderInfo.status}}">
    <view class="status-icon">
      <text>{{riderInfo.status === 'active' ? 'âœ…' : riderInfo.status === 'suspended' ? 'â›”' : 'â³'}}</text>
    </view>
    <view class="status-info">
      <text class="status-title">{{statusText}}</text>
      <text class="status-desc">{{statusDesc}}</text>
    </view>
  </view>

  <!-- åœ¨çº¿å¼€å…³ï¼ˆä»…è®¤è¯éª‘æ‰‹æ˜¾ç¤ºï¼‰ -->
  <view wx:if="{{riderInfo.status === 'active'}}" class="online-card" bindtap="onToggleOnline">
    <view class="online-left">
      <text class="online-icon">{{riderInfo.is_online ? 'ğŸŸ¢' : 'âšª'}}</text>
      <view>
        <text class="online-label">{{riderInfo.is_online ? 'åœ¨çº¿æ¥å•ä¸­' : 'å½“å‰å·²ç¦»çº¿'}}</text>
        <text class="online-hint">{{riderInfo.is_online ? 'ç‚¹å‡»åˆ‡æ¢ä¸ºç¦»çº¿' : 'ç‚¹å‡»åˆ‡æ¢ä¸ºåœ¨çº¿'}}</text>
      </view>
    </view>
    <view class="switch {{riderInfo.is_online ? 'switch--on' : ''}}">
      <view class="switch-ball" />
    </view>
  </view>

  <!-- å»æ¥å•æŒ‰é’®ï¼ˆè®¤è¯éª‘æ‰‹æ˜¾ç¤ºï¼‰ -->
  <view wx:if="{{riderInfo.status === 'active'}}" class="go-orders-btn" bindtap="onGoOrders">
    <text>è¿›å…¥æŠ¢å•å¤§å…</text>
    <text class="go-orders-arrow">></text>
  </view>

  <!-- æ•°æ®ç»Ÿè®¡ï¼ˆä»…è®¤è¯éª‘æ‰‹æ˜¾ç¤ºï¼‰ -->
  <view wx:if="{{riderInfo.status === 'active'}}" class="stats-card">
    <view class="stat-item">
      <text class="stat-value">{{riderInfo.total_orders || 0}}</text>
      <text class="stat-label">ç´¯è®¡å•æ•°</text>
    </view>
    <view class="stat-divider" />
    <view class="stat-item">
      <text class="stat-value">Â¥{{earningsYuan}}</text>
      <text class="stat-label">ç´¯è®¡è®°è´¦æ”¶ç›Š</text>
    </view>
  </view>

  <!-- éª‘æ‰‹ä¿¡æ¯ -->
  <view class="info-card">
    <view class="info-title">ç”³è¯·ä¿¡æ¯</view>
    <view class="info-row">
      <text class="info-label">çœŸå®å§“å</text>
      <text class="info-value">{{riderInfo.real_name}}</text>
    </view>
    <view class="info-row">
      <text class="info-label">è”ç³»ç”µè¯</text>
      <text class="info-value">{{riderInfo.phone}}</text>
    </view>
    <view class="info-row">
      <text class="info-label">è½¦è¾†ç±»å‹</text>
      <text class="info-value">{{vehicleTypeText}}</text>
    </view>
    <view class="info-row" wx:if="{{riderInfo.vehicle_desc}}">
      <text class="info-label">è½¦è¾†æè¿°</text>
      <text class="info-value">{{riderInfo.vehicle_desc}}</text>
    </view>
    <view class="info-row" wx:if="{{riderInfo.service_area}}">
      <text class="info-label">é…é€åŒºåŸŸ</text>
      <text class="info-value">{{riderInfo.service_area}}</text>
    </view>
  </view>

  <!-- æ‹’ç»åŸå›  & é‡æ–°æäº¤ï¼ˆpending + æœ‰æ‹’ç»åŸå› æ—¶æ˜¾ç¤ºï¼‰ -->
  <view wx:if="{{riderInfo.status === 'pending' && riderInfo.reject_reason}}" class="reject-card">
    <text class="reject-title">å®¡æ ¸æœªé€šè¿‡åŸå› </text>
    <text class="reject-reason">{{riderInfo.reject_reason}}</text>
    <view class="reapply-btn" bindtap="onReApply">ä¿®æ”¹ä¿¡æ¯ï¼Œé‡æ–°æäº¤</view>
  </view>

  <!-- æç¤ºä¿¡æ¯ï¼ˆpending ä¸”æ— æ‹’ç»åŸå› æ—¶ï¼‰ -->
  <view wx:if="{{riderInfo.status === 'pending' && !riderInfo.reject_reason}}" class="pending-tip">
    <text>é¢„è®¡ 1-3 ä¸ªå·¥ä½œæ—¥å†…å®Œæˆå®¡æ ¸ï¼Œè¯·è€å¿ƒç­‰å¾…</text>
  </view>
</view>

<view class="loading-center" wx:elif="{{loading}}">
  <text>åŠ è½½ä¸­...</text>
</view>

<toast id="toast" />
